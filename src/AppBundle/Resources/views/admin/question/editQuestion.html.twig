{% extends '::adminbase.html.twig' %}

{% block content %}
    <section class="content-header">
        <ol class="breadcrumb">
            {#<li><a href="{{ url('admin_index') }}"><i class="fa fa-dashboard"></i> Home admin</a></li>#}
            {#<li><a href="{{ url('admin_comment_index') }}">Comment list</a></li>#}
            {#<li class="active">Edit Comment</li>#}
        </ol>
    </section>

    <section class="content">
        {{ form_start(form) }}
        {{ form_widget(form) }}

        <br/>
        {{ form_rest(form) }}
        {#<a href="#" class="add_tag_link">Add answer</a>#}
        <br/>
        <input type="submit" VALUE="Save" class="btn btn-large btn-primary pull-left" id="submit">
        {{ form_end(form) }}
        <a href="{{ path('show_module') }}" class="btn btn-large btn-primary pull-right">DONE</a>
    </section>

{% endblock %}


{% block javascripts %}
    {{ parent() }}

    <script>

        $(function(){
            // setup an "add a tag" link
            var addLink = $('<a class="btn btn-primary add">Add Answer</a>');
            var deleteLink = $('<a class="btn btn-danger remove"><i class="fa fa-trash"></i></a>');

            function addLinkClick(e) {
                e.preventDefault();
                var collection = $(this).closest('#app_bundle_question_type_answers');
                var count = collection.children().length - 1;

                var prototype = collection.data('prototype').replace(/__name__label__/g, count);
                prototype = $(prototype).wrap('<li>').parent();

                prototype.append(deleteLink.clone().click(deleteLinkClick));


                $(this).parent().before(prototype);
            }

            function deleteLinkClick(e) {
                e.preventDefault();
                $(this).parent().remove();
            }

            $('form #app_bundle_question_type_answers').each(function(){
                $(this).children().append(deleteLink.clone().click(deleteLinkClick));
            });

            $('form #app_bundle_question_type_answers').each(function(){
                if (!$(this).data('prototype').length) return;

                var li = $('<li/>').append(addLink.click(addLinkClick));
                $(this).append(li);
            });
        });
    </script>
{% endblock %}